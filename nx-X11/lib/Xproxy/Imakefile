NULL =

#define DoNormalLib NormalLibXproxy
#define DoSharedLib SharedLibXproxy
#define DoExtraLib SharedLibXproxy
#define DoDebugLib DebugLibXproxy
#define DoProfileLib ProfileLibXproxy
#define LibName NX_Xproxy
#define SoRev SOXPROXYREV
#define HugeLibrary NO
#define IncSubdir nx-X11

#include <Threads.tmpl>

#ifdef SharedXextReqs
REQUIREDLIBS = SharedXproxyReqs
#endif

#if HasPoll
   POLL_DEFINES = -DUSE_POLL
#endif
   CONN_DEFINES = $(CONNECTION_FLAGS)
   XTRANS_X_DEFINES = -DX11_t -DTRANS_CLIENT $(XTRANS_FAILDEFINES)

HEADERS = \
	Xproxy.h \
	$(NULL)

SRCS =			\
	ChkIfEv.c	\
	ClDisplay.c	\
	ConnDis.c	\
	OpenDis.c	\
	x11trans.c	\
	$(NULL)

OBJS = \
	ChkIfEv.o	\
	ClDisplay.o	\
	ConnDis.o	\
	OpenDis.o	\
	x11trans.o	\
	$(NULL)

NX_DEFINES = -DNX_TRANS_SOCKET	\
             -DNX_TRANS_EXIT	\
             -DNX_TRANS_CHANGE	\
             -DNX_TRANS_WARN	\
             -DNX_TRANS_INFO	\
             -DNX_TRANS_TEST	\
             -DNX_TRANS_DEBUG	\
             $(NULL)

DEFINES = $(NX_DEFINES)

#define IncludeSharedObjectInNormalLib
#define UnsharedLibObjCompile(options) LibObjCompile(unshared,$(CDEBUGFLAGS) $(CLIBDEBUGFLAGS) options $(PICFLAGS))

#include <Library.tmpl>

SpecialCLibObjectRule(x11trans,$(ICONFIGFILES),$(TRANS_INCLUDES) $(CONN_DEFINES) $(SOCK_DEFINES) $(XTRANS_X_DEFINES) $(POLL_DEFINES))
LinkFile(x11trans.c,$(TRANSCOMMSRC)/transport.c)
XCOMM SpecialCLibObjectRule(ConnDis,$(ICONFIGFILES),$(XDMAUTHDEFS) $(RPCDEFS) $(CONN_DEFINES) $(SOCK_DEFINES) $(POLL_DEFINES) $(XTRANS_X_DEFINES) $(K5INCL) $(K5DEFS))
XCOMM SpecialCLibObjectRule(OpenDis,$(ICONFIGFILES),$(BC_DEFINES) $(OPEN_DEFINES) $(XTRANS_X_DEFINES) $(XKB_DEFINES))

DependTarget()
